# Understanding Sync Strategies - Simple Guide

**For**: SpecWeave Users
**Version**: 0.10.0+
**Status**: User-Facing Documentation

---

## üéØ IMPORTANT: SpecWeave's Source of Truth

**Before we dive into sync strategies, understand this key principle**:

```
‚úÖ CORRECT Architecture:
.specweave/  ‚Üê‚Üí  GitHub Issues       (Local ‚Üî External)
.specweave/  ‚Üê‚Üí  Jira Epics          (Local ‚Üî External)
.specweave/  ‚Üê‚Üí  Azure DevOps Items  (Local ‚Üî External)

‚ùå WRONG:
GitHub  ‚Üê‚Üí  Jira                     (External ‚Üî External - NO!)
```

**Key Points**:
- üìÅ **`.specweave/` is your source of truth** (local, permanent, version-controlled)
- ü™û **External tools are MIRRORS** (GitHub, Jira, ADO sync FROM `.specweave/`)
- ‚ö° **Sync direction**: Local ‚Üî External (NOT External ‚Üî External)

**Why this matters**: SpecWeave keeps your specs local and version-controlled. External tools reflect this truth, but they're NOT the source. If you lose access to Jira or GitHub, you still have `.specweave/`.

---

## What Are Sync Strategies?

When you connect SpecWeave to external tools (Jira, GitHub, Azure DevOps), you need to choose **HOW** your work is organized in those tools. SpecWeave supports three strategies:

### üéØ The Three Strategies (Choose ONE)

```
1. SIMPLE   ‚îÄ‚îÄ‚îÄ‚îÄ‚Üí  One project/repo, no filtering
2. FILTERED ‚îÄ‚îÄ‚îÄ‚îÄ‚Üí  Multiple projects/repos + boards + filters
3. CUSTOM   ‚îÄ‚îÄ‚îÄ‚îÄ‚Üí  Write your own query (power users)
```

---

## Strategy 1: SIMPLE (Most Common - 70% of Users)

**Use when**: You have ONE project or repo and want to sync everything

**Example Scenarios**:
- ‚úÖ "I have one Jira project called PROJECT-A, sync all issues"
- ‚úÖ "I have one GitHub repo (myorg/web-app), sync all issues"
- ‚úÖ "I have one ADO project called Platform, sync all work items"

**Configuration** (automatically generated by `specweave init`):

```json
{
  "strategy": "simple",
  "provider": "jira",
  "config": {
    "domain": "mycompany.atlassian.net",
    "projectKey": "PROJECT-A"
  }
}
```

**What gets synced**:
- ‚úÖ ALL issues from PROJECT-A
- ‚úÖ ALL boards in PROJECT-A
- ‚úÖ ALL epics, stories, tasks

**Pros**:
- ‚úÖ Easiest to set up (2 questions: provider + project)
- ‚úÖ No configuration complexity
- ‚úÖ Fast sync (one API call to get everything)

**Cons**:
- ‚ùå Can't filter by boards
- ‚ùå Can't sync from multiple projects
- ‚ùå All-or-nothing approach

---

## Strategy 2: FILTERED (Advanced - 25% of Users)

**Use when**: You work across MULTIPLE projects/repos and want board-level control

**Example Scenarios**:
- ‚úÖ "I work on 2 Jira projects (PROJECT-A, PROJECT-B), but only want specific boards"
- ‚úÖ "I manage frontend across 3 repos (web, mobile, shared), need to track all"
- ‚úÖ "I'm a platform lead across 2 ADO projects with specific area paths"

**Configuration** (guided by `specweave init`):

```json
{
  "strategy": "filtered",
  "provider": "jira",
  "config": {
    "domain": "mycompany.atlassian.net",
    "containers": [
      {
        "id": "PROJECT-A",
        "subOrganizations": ["Team Alpha Board", "Team Beta Board"],
        "filters": {
          "includeLabels": ["feature", "enhancement"],
          "statusCategories": ["To Do", "In Progress"]
        }
      },
      {
        "id": "PROJECT-B",
        "subOrganizations": ["Platform Board"]
      }
    ]
  }
}
```

**What gets synced**:
- ‚úÖ From PROJECT-A: Only "Team Alpha Board" and "Team Beta Board"
- ‚úÖ From PROJECT-A: Only issues with labels "feature" or "enhancement"
- ‚úÖ From PROJECT-B: Only "Platform Board"
- ‚úÖ From both: Only issues with status "To Do" or "In Progress"

**Terminology by Provider**:

| Concept | Jira | GitHub | Azure DevOps |
|---------|------|--------|--------------|
| **Container** | Project | Repository | Project |
| **Sub-Organization** | Board | Project Board | Team Board |
| **Filter Example** | Labels, Components | Labels, Milestones | Area Paths, Work Item Types |

**Pros**:
- ‚úÖ Maximum flexibility
- ‚úÖ Work across multiple projects/repos
- ‚úÖ Board-level control (only sync what you need)
- ‚úÖ Powerful filtering (labels, assignees, status, etc.)

**Cons**:
- ‚ùå More complex setup (5-10 minutes vs 2 minutes)
- ‚ùå Requires understanding of your organization structure
- ‚ùå More API calls (can hit rate limits if not careful)

---

## Strategy 3: CUSTOM (Power Users - 5% of Users)

**Use when**: You need MAXIMUM control with complex queries

**Example Scenarios**:
- ‚úÖ "I want all critical bugs from last 3 months across 5 projects"
- ‚úÖ "I need stories assigned to my team with specific epic links"
- ‚úÖ "I want work items matching a complex WIQL query"

**Configuration**:

```json
{
  "strategy": "custom",
  "provider": "jira",
  "config": {
    "domain": "mycompany.atlassian.net",
    "customQuery": "project IN (PROJECT-A, PROJECT-B, PROJECT-C) AND labels IN (critical, p1) AND sprint IN openSprints() AND assignee IN membersOf('platform-team')"
  }
}
```

**Query Syntax by Provider**:
- **Jira**: JQL (Jira Query Language)
- **GitHub**: GitHub search syntax
- **ADO**: WIQL (Work Item Query Language)

**Pros**:
- ‚úÖ Unlimited power (write ANY query you want)
- ‚úÖ Complex filtering logic (AND, OR, NOT, IN, etc.)
- ‚úÖ Access to all provider-specific fields

**Cons**:
- ‚ùå Requires learning query language (JQL/GraphQL/WIQL)
- ‚ùå No GUI (must write queries manually)
- ‚ùå Error-prone (typos break sync)
- ‚ùå Hard to maintain (query becomes stale)

---

## How to Choose?

### Decision Tree

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Do you work across multiple projects/repos? ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                 ‚îÇ
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        NO              YES
        ‚îÇ                 ‚îÇ
        ‚ñº                 ‚ñº
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇ SIMPLE  ‚îÇ  ‚îÇ Do you need board- ‚îÇ
    ‚îÇ         ‚îÇ  ‚îÇ level control?      ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                            ‚îÇ
                   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                   NO              YES
                   ‚îÇ                 ‚îÇ
                   ‚ñº                 ‚ñº
              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
              ‚îÇ SIMPLE  ‚îÇ   ‚îÇ Do you need      ‚îÇ
              ‚îÇ(sync all)‚îÇ   ‚îÇ complex queries? ‚îÇ
              ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                     ‚îÇ
                            ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                            NO              YES
                            ‚îÇ                 ‚îÇ
                            ‚ñº                 ‚ñº
                       ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                       ‚îÇ FILTERED ‚îÇ    ‚îÇ CUSTOM ‚îÇ
                       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### Quick Recommendations

**Start with SIMPLE if**:
- ‚úÖ You're new to SpecWeave
- ‚úÖ Your work lives in one project/repo
- ‚úÖ You don't need board-level filtering
- ‚úÖ You want to get started quickly

**Upgrade to FILTERED when**:
- ‚úÖ You start working across multiple projects
- ‚úÖ You only care about specific boards
- ‚úÖ You want to filter by labels/assignees
- ‚úÖ Your team grows and spans multiple projects

**Use CUSTOM only if**:
- ‚úÖ You're comfortable with JQL/GraphQL/WIQL
- ‚úÖ You have unique filtering needs not supported by FILTERED
- ‚úÖ You're okay maintaining query strings

---

## Real-World Examples

### Example 1: Simple Strategy (Single Project)

**Scenario**: Sarah works on a mobile app, one GitHub repo

**Setup**:
```bash
$ specweave init
? Which issue tracker? GitHub
? How is your work organized? Simple (one repo)
? GitHub repo: myorg/mobile-app

‚úÖ Sync profile created: mobile-app-sync
```

**Result**: All issues from `myorg/mobile-app` are synced

---

### Example 2: Filtered Strategy (Cross-Team Work)

**Scenario**: Mike is a platform lead working across 2 Jira projects, each with multiple boards. He only cares about specific boards.

**Setup**:
```bash
$ specweave init
? Which issue tracker? Jira
? How is your work organized? Filtered (multiple projects + boards)
? Select projects:
  ‚òë PROJECT-PLATFORM
  ‚òë PROJECT-SERVICES
? Select boards from PROJECT-PLATFORM:
  ‚òë Platform Core Board
  ‚òë Infrastructure Board
? Select boards from PROJECT-SERVICES:
  ‚òë API Services Board
? Add filters? Yes
? Include labels: platform, infrastructure, api

‚úÖ Sync profile created: cross-platform-sync
```

**Result**: Issues from 3 specific boards with labels "platform", "infrastructure", or "api"

---

### Example 3: Custom Strategy (Power User)

**Scenario**: Alex needs all P1/P2 bugs from last month across 5 Jira projects

**Setup**:
```bash
$ specweave init
? Which issue tracker? Jira
? How is your work organized? Custom (I'll write my own query)
? Enter JQL query:
  project IN (PROJ-A, PROJ-B, PROJ-C, PROJ-D, PROJ-E)
  AND priority IN (P1, P2)
  AND issuetype = Bug
  AND created >= -30d

‚úÖ Sync profile created: critical-bugs-sync
```

**Result**: All P1/P2 bugs from last 30 days across 5 projects

---

## Configuration Examples

### Jira: Multi-Project with Board Filtering

```json
{
  "sync": {
    "profiles": {
      "cross-team-work": {
        "provider": "jira",
        "displayName": "Cross-Team Platform Work",
        "strategy": "filtered",
        "config": {
          "domain": "mycompany.atlassian.net",
          "containers": [
            {
              "id": "PLATFORM",
              "subOrganizations": ["Core Team Board", "Infrastructure Board"],
              "filters": {
                "includeLabels": ["platform", "core"],
                "assignees": ["platform-lead@company.com"],
                "statusCategories": ["To Do", "In Progress"]
              }
            },
            {
              "id": "SERVICES",
              "subOrganizations": ["API Team Board"],
              "filters": {
                "includeLabels": ["api", "services"]
              }
            }
          ]
        },
        "timeRange": {
          "default": "1M",
          "max": "6M"
        }
      }
    }
  }
}
```

### GitHub: Multi-Repo Frontend Sync

```json
{
  "sync": {
    "profiles": {
      "frontend-work": {
        "provider": "github",
        "displayName": "Frontend Across Repos",
        "strategy": "filtered",
        "config": {
          "containers": [
            {
              "id": "myorg/web-app",
              "subOrganizations": ["Frontend Board", "UI Components"],
              "filters": {
                "includeLabels": ["frontend", "ui"],
                "milestones": ["v2.0", "v2.1"]
              }
            },
            {
              "id": "myorg/mobile-app",
              "subOrganizations": ["Mobile UI Board"],
              "filters": {
                "includeLabels": ["frontend", "mobile"]
              }
            }
          ]
        },
        "timeRange": {
          "default": "1M",
          "max": "3M"
        }
      }
    }
  }
}
```

### ADO: Multi-Project with Area Paths

```json
{
  "sync": {
    "profiles": {
      "platform-services": {
        "provider": "ado",
        "displayName": "Platform & Services Teams",
        "strategy": "filtered",
        "config": {
          "organization": "myorg",
          "containers": [
            {
              "id": "Platform",
              "filters": {
                "areaPaths": ["Platform\\Core", "Platform\\Infrastructure"],
                "workItemTypes": ["User Story", "Bug"],
                "iterationPaths": ["Sprint 24", "Sprint 25"]
              }
            },
            {
              "id": "Services",
              "filters": {
                "areaPaths": ["Services\\API", "Services\\Integration"],
                "workItemTypes": ["Feature", "User Story"]
              }
            }
          ]
        },
        "timeRange": {
          "default": "1M",
          "max": "6M"
        }
      }
    }
  }
}
```

---

## Migration Guide

### From Simple to Filtered

**Before** (Simple):
```json
{
  "strategy": "simple",
  "config": {
    "domain": "mycompany.atlassian.net",
    "projectKey": "PROJECT-A"
  }
}
```

**After** (Filtered):
```json
{
  "strategy": "filtered",
  "config": {
    "domain": "mycompany.atlassian.net",
    "containers": [
      {
        "id": "PROJECT-A",
        "subOrganizations": ["Board 1", "Board 2"]
      },
      {
        "id": "PROJECT-B",
        "subOrganizations": ["Board 3"]
      }
    ]
  }
}
```

**How to migrate**:
1. Edit `.specweave/config.json`
2. Change `strategy` from `"simple"` to `"filtered"`
3. Replace `projectKey` with `containers` array
4. Add board names to `subOrganizations`
5. Test sync: `/specweave-jira:sync <increment-id>`

---

## Troubleshooting

### "Strategy not specified" Error

**Cause**: Your config doesn't have a `strategy` field

**Fix**: Add strategy field (defaults to "simple" for backward compatibility)

```json
{
  "strategy": "simple",  // ‚Üê Add this line
  "provider": "jira",
  ...
}
```

### "Containers array is empty" Error

**Cause**: You chose "filtered" strategy but didn't provide containers

**Fix**: Either add containers OR switch to "simple" strategy

```json
{
  "strategy": "filtered",
  "config": {
    "containers": [  // ‚Üê Must have at least one container
      {
        "id": "PROJECT-A"
      }
    ]
  }
}
```

### "Cannot find board" Error

**Cause**: Board name doesn't exist in the project

**Fix**: Check board names in Jira/GitHub/ADO, update config with correct names

```bash
# List boards for a Jira project
curl -u email:token https://mycompany.atlassian.net/rest/agile/1.0/board?projectKeyOrId=PROJECT-A

# Update config with correct board names
```

---

## Summary

| Strategy | Complexity | Use Case | Setup Time |
|----------|-----------|----------|------------|
| **SIMPLE** | ‚≠ê Easy | One project/repo | 2 min |
| **FILTERED** | ‚≠ê‚≠ê‚≠ê Moderate | Multiple projects + boards | 10 min |
| **CUSTOM** | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê Advanced | Complex queries | 20 min |

**Recommendation**: Start with SIMPLE, upgrade to FILTERED when needed, use CUSTOM only if you must.

**Questions?** See [SpecWeave Sync Documentation](https://spec-weave.com/guides/external-sync)

---

**Version**: 0.10.0
**Last Updated**: 2025-11-09
**Author**: SpecWeave Team
